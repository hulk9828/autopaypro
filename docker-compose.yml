services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: payment_app
    restart: always
    env_file:
      - .env
    environment:
      - DATABASE_URL=postgresql+asyncpg://kushagra:root123@host.docker.internal:5432/payment_db
    ports:
      - "8218:8218"  # Bind to all interfaces (0.0.0.0) to allow external access
    volumes:
      - .:/app
    command: >
      uvicorn app.main:app
      --host 0.0.0.0
      --port 8218
      --reload
